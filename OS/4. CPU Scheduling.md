# CPU Scheduling
======

## CPU(Central Processing Unit)

프로세서는 컴퓨터나 전자기기 등에 내장된 칩을 뜻한다.
CPU는 프로세서의 한 종류로써 하드웨어의 입력처리,
응용 프로그램 실행과 같은 시스템 명령을 처리하는
컴퓨터의 중앙 프로세서이다.


## 스케줄링

CPU를 효율적으로 동작시키기 위해 프로세스를 배정하는 작업이다.
CPU 스케줄러는 실행 준비가 되어 있는 메모리 내의 프로세스 중에
선택하여 이들 중 하나에 CPU를 할당한다.


## 스케줄링 기준

스케줄링의 기본적인 목표는 CPU의 이용률, 처리량을 최대화하고
총 처리시간, 대기시간, 응답시간을 최소화하는 것을 목표로한다.


## 선점 / 비선점 스케줄링

- [선점(Preemptive)] : 운영 체제가 CPU의 사용권을 선점할 수 있는 경우,
  프로세스로 부터 CPU를 강제 회수할 수있는 경우 (처리시간 예측이 어려움)

- [비선점(Nonpreemptive)] : 프로세스 종료 or I/O 등의 이벤트가
  있을 때까지, 프로세스가 CPU를 반환할때 까지 점유 (처리시간 예측이 쉬움)


## 프로세스의 상태

- [승인(Admitted)] : 프로세스 생성이 가능하여 승인됨

- [스케줄러_디스패치(Scheduler_Dispatch)] : 준비 상태에 있는
  프로세스 중 하나를 선택하여 실행하는 것

- [인터럽트(Interrupt)] : 예외, 입출력, 이벤트 등이 발생하여 현재
  실행 중인 프로세스를 준비 상태로 바꾸고, 해당 작업을 먼저 처리하는 것

- [입출력_또는_이벤트_대기(I/O_or_Event_Wait)] : 실행 중인 프로세스가
  입출력이나 이벤트를 처리해야 하는 경우, 입출력/이벤트가 모두 끝날 때까지
  대기 상태로 만드는 것

- [입출력_또는_이벤트_완료(I/O_or_Event_Completion)] : 입출력/이벤트가
  끝난 프로세스를 준비 상태로 전환하여 스케줄러에 의해 선택될 수 있도록
  만드는 것


## 스케줄링의 종류

### 선점 스케줄링

- [Priority_Scheduling]
  대기 상태의 프로세스들을 비교해 정적/동적으로 우선순위를 정하여
  우선순위가 높은순서로 처리 우선 순위가 낮은 프로세스가 무한정
  기다리는 [기아현상(Starvation)]가 발생 할 수 있다.
  Aging 기법으로 기아상태 해결이 가능하다.

  [Aging_기법] : 일정 시간이 지나면 우선 순위를 점진적으로 높여주는 방법

- [Round_Robin] : FIFO(FCFS) 기법의 선점형 타입이다.
  FIFO와 같은 방식으로 CPU를 할당하지만 정해진 시간만큼만
  CPU를 사용할 수 있게하는 방식이다. 시간내에 완료하지 못한 작업들은
  대기 상태 맨뒤로 들어가게 된다. 할당 시간이 너무 길면 FIFO와 같은
  문제점이 생기고 할당 시간이 너무 짧으면 Context Switching이 잦아져
  오버헤드가 늘어난다.

- [MLQ(Multi_Level_Queue)] : 프로세스들을 특정 큐로 분리하고 중요도에
  따라 각 큐마다 적절한 알고리즘을 적용하는 방식이다.
  프로세스 우선순위 처리에 대한 효율성을 높일 수 있다. 하지만 특정
  큐에 들어가는 순간 다른 큐로 이동할 수 없기때문에 유연하지 못한
  단점이 있다.

  작업의 중요도 높음
  -----------------
  ===> Queue 1 ===>
  ===> Queue 2 ===>
  ===> Queue 3 ===>
  -----------------
  작업의 중요도 낮음

- [MLFQ(Multi_Level_Feedback_Queue)] : MLQ 기법에서 프로세스가
  다른 큐로 이동할수 없는 점을 보완한 기법이다. 먼저 중요도가 높다고
  판단되는 프로세스들이 모이는 큐로 들어가게 된다. 이때 효율적으로
  사용되는 대표적으로 사용되는 기법은 Round Robin 기법이다.
  이 큐에서 수행이 완료되지 못한 프로세스들은 다음 큐로 넘기고
  CPU 할당시간을 더 늘려서 할당 시킨다. 가장 중요도가 낮다고 판단
  되는 큐는 FIFO(FCFS)기법으로 처리하기도 한다.


### 비선점 스케줄링

- [FIFO(First_In_First_Out)_or_FCFS(First_Come_Fist_Serve)] :
  큐에 먼저 도착한 프로세스가 먼저 CPU를 할당받는 방식이다.
  공평성이 유지되지만 중요한 작업이 늦게 처리되거나
  실행시간이 긴 프로세스가 먼저 도착하면 평균 대기시간이 길어지는
  [호위_효과(Convoy_Effect)]가 발생해 효율이 떨어질 수 있다.

- [SJF(Shortest_Job_First)] : 실행시간이 짧은 프로세스에게 먼저
  CPU를 할당하는 방식이다. 짧은 작업을 우선 처리해 평균 대기시간을
  줄일 수 있다. 하지만 기아현상(Starvation)이 발생할 우려가 있다.
  
- [HRN(Hightest_Response-Ratio_Next)] : SJF 기법의 결점을 보완한
  방식이다. 우선순위를 계산해서 프로세스들에게 부여하는 방식으로
  우선순위는 (대기시간+실행시간)/실행시간 으로 계산한다.
  이는 프로세스의 대기시간이 길어질수록 더 높은 우선순위를 갖게해준다.


Reference :
https://gyoogle.dev/blog/computer-science/operating-system/CPU%20Scheduling.html
https://imbf.github.io/computer-science(cs)/2020/10/18/CPU-Scheduling.html
https://yabmoons.tistory.com/655